<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- PWA & Mobile Optimization -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#6B2D5C" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512x512.png" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:wght@600;700;800&display=swap"
      rel="stylesheet"
    />
    
    <title>StockPilot - Pharmacy POS Terminal</title>
    <meta name="description" content="Modern pharmacy point-of-sale system for efficient transaction processing" />
  </head>
  
  <body>
    <div class="bg-background-light dark:bg-background-dark min-h-screen text-stone-800 dark:text-stone-200 transition-colors">
      
      <!-- Header/Navigation Bar -->
      <header class="flex items-center justify-between border-b border-gold/20 px-3 sm:px-6 lg:px-8 py-3 bg-gradient-to-r from-primary via-accent to-primary dark:from-purple-dark dark:via-primary dark:to-purple-dark sticky top-0 z-20 shadow-premium backdrop-blur-sm">
        <div class="flex items-center gap-2 sm:gap-4">
          <!-- Gear+Lightbulb Logo -->
          <div class="flex items-center gap-2 sm:gap-3">
            <svg class="h-5 w-5 sm:h-7 sm:w-7 text-gold drop-shadow-lg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
              <!-- Gear outer ring -->
              <path d="M50 10 L55 20 L67 18 L70 30 L82 32 L80 44 L90 50 L80 56 L82 68 L70 70 L67 82 L55 80 L50 90 L45 80 L33 82 L30 70 L18 68 L20 56 L10 50 L20 44 L18 32 L30 30 L33 18 L45 20 L50 10Z" fill="currentColor" opacity="0.9"/>
              <!-- Gear inner circle -->
              <circle cx="50" cy="50" r="20" fill="#6B2D5C"/>
              <!-- Lightbulb -->
              <path d="M50 35 Q45 38 45 43 Q45 48 47 50 L47 55 Q47 57 50 57 Q53 57 53 55 L53 50 Q55 48 55 43 Q55 38 50 35Z" fill="#C4A56A"/>
              <!-- Lightbulb base -->
              <rect x="48" y="57" width="4" height="3" rx="1" fill="#C4A56A"/>
              <!-- Light rays -->
              <line x1="50" y1="28" x2="50" y2="32" stroke="#C4A56A" stroke-width="1.5" stroke-linecap="round"/>
              <line x1="60" y1="33" x2="57" y2="36" stroke="#C4A56A" stroke-width="1.5" stroke-linecap="round"/>
              <line x1="40" y1="33" x2="43" y2="36" stroke="#C4A56A" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            <h2 class="text-base sm:text-xl font-display font-bold text-white">
              StockPilot <span class="text-gold">POS</span>
            </h2>
          </div>
        </div>
        
        <div class="flex items-center gap-2 sm:gap-3">
          <p class="text-xs sm:text-sm font-medium hidden md:block text-white/90">
            Cashier ID: 
            <span id="userIdDisplay" class="font-mono text-xs px-2 py-1 rounded-md bg-gold/20 border border-gold/30 text-gold">
              Loading...
            </span>
          </p>
          
          <!-- Install App Button -->
          <button id="installButton" class="hidden px-2 py-1.5 sm:px-3 sm:py-2 bg-gold text-primary text-xs font-semibold rounded-lg hover:bg-gold-dark hover:shadow-glow-gold transition-all duration-300 shadow-md flex items-center gap-1 sm:gap-2" aria-label="Install app">
            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <path d="M240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16H80a8,8,0,0,1,0,16H32v64H224V136H176a8,8,0,0,1,0-16h48A16,16,0,0,1,240,136ZM85.66,77.66,120,43.31V128a8,8,0,0,0,16,0V43.31l34.34,34.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,77.66Z"></path>
            </svg>
            <span class="hidden md:inline">Install App</span>
          </button>
          
          <!-- Dark Mode Toggle Button -->
          <button id="darkModeToggle" class="p-2 rounded-full hover:bg-white/10 transition-all duration-300" aria-label="Toggle dark mode">
            <svg id="moonIcon" class="h-5 w-5 sm:h-6 sm:w-6 text-gold transition-opacity" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <path d="M216.7,152.6a8,8,0,0,1,11.5,8.8A104,104,0,0,1,64,64a8,8,0,0,1,8.8-11.5,112.16,112.16,0,0,0-5.74,1.86,104.28,104.28,0,0,0,149.62,149.62A112.16,112.16,0,0,0,216.7,152.6Z"></path>
            </svg>
            <svg id="sunIcon" class="h-5 w-5 sm:h-6 sm:w-6 text-gold transition-opacity hidden" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <path d="M128,16a8,8,0,0,0-8,8V56a8,8,0,0,0,16,0V24A8,8,0,0,0,128,16Zm96,96H200a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16ZM56,120H24a8,8,0,0,0,0,16H56a8,8,0,0,0,0-16Zm10.24-60.24a8,8,0,0,0,0,11.31L83.31,83.31a8,8,0,0,0,11.32-11.32L77.56,58.69A8,8,0,0,0,66.24,59.76ZM172.69,72a8,8,0,0,0,11.32,0l17.07-17.07a8,8,0,0,0-11.32-11.32L172.69,60.68A8,8,0,0,0,172.69,72ZM197.31,183.31l17.07,17.07a8,8,0,0,0,11.32-11.32L208.62,172a8,8,0,0,0-11.31,11.31ZM83.31,172.69a8,8,0,0,0-11.32,11.32l17.07,17.07a8,8,0,0,0,11.32-11.32ZM128,192a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V200A8,8,0,0,0,128,192ZM128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Z"></path>
            </svg>
          </button>
        </div>
      </header>

      <!-- Main POS Container -->
      <main class="pos-container">

        <!-- POS Catalog (Left Side - 2/3rds on Desktop) -->
        <section class="p-4 sm:p-6 lg:p-8 bg-gradient-radial from-white via-white to-purple-light/5 dark:from-background-dark dark:via-background-dark dark:to-primary/10 border-r border-gold/20 flex flex-col h-full">
          <h1 class="text-2xl sm:text-3xl font-display font-bold mb-4 text-primary dark:text-gold">Pharmacy Catalog</h1>

          <!-- Search and Filter -->
          <div class="mb-6 sticky top-0 z-10 bg-white/80 dark:bg-background-dark/80 backdrop-blur-md py-2 rounded-xl">
            <div class="relative group">
              <!-- Search Icon -->
              <svg class="absolute left-3 top-1/2 -translate-y-1/2 text-primary/50 group-focus-within:text-gold transition-colors duration-300" fill="currentColor" height="20" viewBox="0 0 256 256" width="20" xmlns="http://www.w3.org/2000/svg">
                <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
              </svg>
              <input 
                id="productSearch" 
                type="text" 
                class="w-full h-12 rounded-xl bg-gradient-to-r from-stone-50 to-gold/5 dark:from-stone-800/50 dark:to-primary/20 pl-11 pr-4 text-base focus:outline-none focus:ring-2 focus:ring-gold focus:border-primary border-2 border-transparent hover:border-primary/20 transition-all duration-300" 
                placeholder="Search products by name or SKU..."
                autocomplete="off"
              />
            </div>
          </div>

          <!-- Product Grid (Scrollable) -->
          <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 overflow-y-auto pb-4 flex-grow">
            <!-- Products will be rendered here by TypeScript -->
          </div>
        </section>

        <!-- POS Cart (Right Side - 1/3rd on Desktop) -->
        <section class="p-4 sm:p-6 lg:p-8 bg-gradient-to-br from-cart-bg via-gold/5 to-cart-bg dark:from-stone-900 dark:via-primary/10 dark:to-stone-900 flex flex-col shadow-inner">
          <h2 class="text-2xl sm:text-3xl font-display font-bold bg-gradient-to-r from-primary to-gold bg-clip-text text-transparent mb-4">Transaction Cart</h2>

          <!-- Cart Items List (Scrollable) -->
          <div id="cartItemsList" class="cart-scroll flex-grow overflow-y-auto mb-6 space-y-3 p-2 -m-2">
            <p id="emptyCartMessage" class="text-stone-500 dark:text-stone-400 italic text-center pt-8">
              Click on products to start a new sale or quote.
            </p>
            <!-- Cart items rendered here by TypeScript -->
          </div>

          <!-- Transaction Summary & Actions -->
          <div class="border-t border-stone-300 dark:border-stone-700 pt-4 space-y-3">
            <!-- Totals -->
            <div class="flex justify-between text-base font-medium text-stone-700 dark:text-stone-300">
              <span>Subtotal:</span>
              <span id="subtotalDisplay" class="font-semibold text-primary dark:text-gold">ZMW 0.00</span>
            </div>
            <div class="flex justify-between text-base font-medium text-stone-700 dark:text-stone-300">
              <span>Tax (16% VAT):</span>
              <span id="taxDisplay" class="font-semibold text-primary dark:text-gold">ZMW 0.00</span>
            </div>
            <div class="flex justify-between text-2xl font-extrabold border-t-2 border-gold/30 pt-3 mt-3">
              <span class="font-display bg-gradient-to-r from-primary to-gold bg-clip-text text-transparent">TOTAL:</span>
              <span id="totalDisplay" class="font-display bg-gradient-to-r from-primary to-gold bg-clip-text text-transparent">ZMW 0.00</span>
            </div>

            <!-- Action Buttons -->
            <div class="pt-4 space-y-3">
              <button 
                id="chargeButton" 
                class="w-full h-14 bg-gradient-purple-gold text-white font-bold text-lg rounded-xl shadow-premium hover:shadow-glow-gold transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center justify-center disabled:opacity-50 disabled:hover:scale-100 disabled:hover:shadow-premium" 
                disabled
                aria-label="Complete transaction"
              >
                CHARGE <span id="chargeAmount" class="ml-2">ZMW 0.00</span>
              </button>
              
              <button 
                id="quoteButton" 
                class="w-full h-12 bg-transparent border-2 border-gold text-gold font-semibold rounded-xl hover:bg-gold hover:text-primary transition-all duration-300 disabled:opacity-50 disabled:hover:bg-transparent disabled:hover:text-gold" 
                disabled
                aria-label="Save as quotation"
              >
                Save as Quotation
              </button>
              
              <button 
                id="clearButton" 
                class="w-full h-12 bg-red-50 border-2 border-red-200 text-red-700 font-medium rounded-xl hover:bg-red-100 hover:border-red-300 dark:bg-red-900/20 dark:border-red-800/50 dark:text-red-300 dark:hover:bg-red-900/40 transition-all duration-300"
                aria-label="Clear transaction"
              >
                Clear Transaction
              </button>
            </div>

            <!-- Message Display -->
            <div id="statusMessage" class="hidden p-3 rounded-lg text-center font-medium transition-opacity duration-300 mt-4"></div>
          </div>
        </section>
      </main>
      
      <!-- Powered by Gifted Solutions Footer -->
      <footer class="fixed bottom-4 right-4 z-10 pointer-events-none">
        <div class="bg-gradient-to-r from-primary/95 to-accent/95 backdrop-blur-md rounded-2xl shadow-premium border border-gold/30 px-4 py-2 flex items-center gap-2 pointer-events-auto group hover:shadow-glow-gold transition-all duration-300">
          <!-- Small gear icon -->
          <svg class="h-5 w-5 text-gold animate-spin-slow" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M50 10 L55 20 L67 18 L70 30 L82 32 L80 44 L90 50 L80 56 L82 68 L70 70 L67 82 L55 80 L50 90 L45 80 L33 82 L30 70 L18 68 L20 56 L10 50 L20 44 L18 32 L30 30 L33 18 L45 20 L50 10Z" fill="currentColor" opacity="0.9"/>
            <circle cx="50" cy="50" r="15" fill="#6B2D5C"/>
          </svg>
          <div class="flex flex-col">
            <p class="text-xs font-semibold text-white leading-tight">Powered by <span class="text-gold">GIFTED SOLUTIONS</span></p>
            <p class="text-[10px] text-gold/80 italic leading-tight">Bringing Ideas to Life</p>
          </div>
        </div>
      </footer>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>


