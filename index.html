<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- PWA & Mobile Optimization -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#6B2D5C" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512x512.png" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:wght@600;700;800&display=swap"
      rel="stylesheet"
    />
    
    <title>Taolo POS - Zambia Point of Sale</title>
    <meta name="description" content="Modern point-of-sale system for Zambian businesses" />
  </head>
  
  <body>
    <div class="bg-gray-50 dark:bg-gray-900 min-h-screen text-gray-900 dark:text-white transition-colors">
      
      <!-- Header/Navigation Bar -->
      <header class="flex items-center justify-between border-b border-gray-200 dark:border-gray-800 px-4 sm:px-6 lg:px-8 py-4 bg-white dark:bg-gray-900 sticky top-0 z-20 shadow-sm">
        <div class="flex items-center gap-3 sm:gap-4">
          <!-- Simplified Logo -->
          <div class="flex items-center gap-3">
            <div class="w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-primary flex items-center justify-center">
              <svg class="h-5 w-5 sm:h-6 sm:w-6 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div>
              <h2 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-white">
                Taolo POS
              </h2>
              <p class="text-xs text-gray-500 dark:text-gray-400 hidden sm:block">Zambia</p>
            </div>
          </div>
        </div>
        
        <div class="flex items-center gap-3 sm:gap-4">
          <p class="text-xs sm:text-sm font-medium hidden md:flex items-center gap-2 text-gray-600 dark:text-gray-400">
            Cashier: 
            <span id="userIdDisplay" class="font-mono text-xs px-2.5 py-1 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100">
              Loading...
            </span>
          </p>
          
          <!-- Install App Button -->
          <button id="installButton" class="hidden px-3 py-2 bg-primary text-white text-xs font-medium rounded-lg hover:bg-primary/90 transition-colors duration-200 shadow-sm flex items-center gap-2" aria-label="Install app">
            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <path d="M240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16H80a8,8,0,0,1,0,16H32v64H224V136H176a8,8,0,0,1,0-16h48A16,16,0,0,1,240,136ZM85.66,77.66,120,43.31V128a8,8,0,0,0,16,0V43.31l34.34,34.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,77.66Z"></path>
            </svg>
            <span class="hidden md:inline">Install</span>
          </button>
          
          <!-- Dark Mode Toggle Button -->
          <button id="darkModeToggle" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200" aria-label="Toggle dark mode">
            <svg id="moonIcon" class="h-5 w-5 text-gray-600 dark:text-gray-400" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <path d="M216.7,152.6a8,8,0,0,1,11.5,8.8A104,104,0,0,1,64,64a8,8,0,0,1,8.8-11.5,112.16,112.16,0,0,0-5.74,1.86,104.28,104.28,0,0,0,149.62,149.62A112.16,112.16,0,0,0,216.7,152.6Z"></path>
            </svg>
            <svg id="sunIcon" class="h-5 w-5 text-gray-600 dark:text-gray-400 hidden" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <path d="M128,16a8,8,0,0,0-8,8V56a8,8,0,0,0,16,0V24A8,8,0,0,0,128,16Zm96,96H200a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16ZM56,120H24a8,8,0,0,0,0,16H56a8,8,0,0,0,0-16Zm10.24-60.24a8,8,0,0,0,0,11.31L83.31,83.31a8,8,0,0,0,11.32-11.32L77.56,58.69A8,8,0,0,0,66.24,59.76ZM172.69,72a8,8,0,0,0,11.32,0l17.07-17.07a8,8,0,0,0-11.32-11.32L172.69,60.68A8,8,0,0,0,172.69,72ZM197.31,183.31l17.07,17.07a8,8,0,0,0,11.32-11.32L208.62,172a8,8,0,0,0-11.31,11.31ZM83.31,172.69a8,8,0,0,0-11.32,11.32l17.07,17.07a8,8,0,0,0,11.32-11.32ZM128,192a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V200A8,8,0,0,0,128,192ZM128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Z"></path>
            </svg>
          </button>
        </div>
      </header>

      <!-- Main POS Container -->
      <main class="pos-container">

        <!-- POS Catalog (Left Side - 2/3rds on Desktop) -->
        <section class="p-6 sm:p-8 lg:p-10 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col h-full">
          <h1 class="text-2xl sm:text-3xl font-semibold mb-6 text-gray-900 dark:text-white">Products</h1>

          <!-- Search and Filter -->
          <div class="mb-6">
            <div class="relative">
              <!-- Search Icon -->
              <svg class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400" fill="currentColor" height="20" viewBox="0 0 256 256" width="20" xmlns="http://www.w3.org/2000/svg">
                <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
              </svg>
              <input 
                id="productSearch" 
                type="text" 
                class="w-full h-12 rounded-xl bg-gray-50 dark:bg-gray-800 pl-12 pr-4 text-base text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary border border-gray-200 dark:border-gray-700 transition-all duration-200" 
                placeholder="Search products..."
                autocomplete="off"
              />
            </div>
          </div>

          <!-- Product Grid (Scrollable) -->
          <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-4 overflow-y-auto pb-4 flex-grow">
            <!-- Products will be rendered here by TypeScript -->
          </div>
        </section>

        <!-- POS Cart (Right Side - 1/3rd on Desktop) -->
        <section class="p-6 sm:p-8 lg:p-10 bg-gray-50 dark:bg-gray-800 flex flex-col">
          <h2 class="text-2xl sm:text-3xl font-semibold text-gray-900 dark:text-white mb-6">Cart</h2>

          <!-- Cart Items List (Scrollable) -->
          <div id="cartItemsList" class="cart-scroll flex-grow overflow-y-auto mb-6 space-y-3">
            <p id="emptyCartMessage" class="text-gray-400 dark:text-gray-500 text-center pt-12 text-sm">
              Add products to get started
            </p>
            <!-- Cart items rendered here by TypeScript -->
          </div>

          <!-- Transaction Summary & Actions -->
          <div class="border-t border-gray-200 dark:border-gray-700 pt-6 space-y-4">
            <!-- Totals -->
            <div class="flex justify-between text-base text-gray-600 dark:text-gray-400">
              <span>Subtotal</span>
              <span id="subtotalDisplay" class="font-medium text-gray-900 dark:text-white">ZMW 0.00</span>
            </div>
            <div class="flex justify-between text-base text-gray-600 dark:text-gray-400">
              <span>Tax (16%)</span>
              <span id="taxDisplay" class="font-medium text-gray-900 dark:text-white">ZMW 0.00</span>
            </div>
            <div class="flex justify-between text-xl font-semibold border-t border-gray-200 dark:border-gray-700 pt-4">
              <span class="text-gray-900 dark:text-white">Total</span>
              <span id="totalDisplay" class="text-gray-900 dark:text-white">ZMW 0.00</span>
            </div>

            <!-- Action Buttons -->
            <div class="pt-4 space-y-3">
              <button 
                id="chargeButton" 
                class="w-full h-14 bg-primary text-white font-semibold text-lg rounded-xl hover:bg-primary/90 active:scale-[0.98] transition-all duration-200 flex items-center justify-center disabled:opacity-40 disabled:cursor-not-allowed shadow-sm" 
                disabled
                aria-label="Complete transaction"
              >
                Charge <span id="chargeAmount" class="ml-2">ZMW 0.00</span>
              </button>
              
              <button 
                id="quoteButton" 
                class="w-full h-12 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed" 
                disabled
                aria-label="Save as quotation"
              >
                Save Quotation
              </button>
              
              <button 
                id="clearButton" 
                class="w-full h-12 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 text-red-600 dark:text-red-400 font-medium rounded-xl hover:bg-red-50 dark:hover:bg-red-900/10 transition-all duration-200"
                aria-label="Clear transaction"
              >
                Clear Cart
              </button>
            </div>

            <!-- Message Display -->
            <div id="statusMessage" class="hidden p-3 rounded-lg text-center font-medium transition-opacity duration-200 mt-4"></div>
          </div>
        </section>
      </main>
      
      <!-- About Section Modal (Hidden by default) -->
      <div id="aboutModal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 max-w-lg w-full rounded-2xl shadow-xl overflow-hidden">
          <div class="relative p-6 border-b border-gray-200 dark:border-gray-700">
            <h2 class="text-2xl font-semibold text-gray-900 dark:text-white">About Taolo POS</h2>
            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Zambia Point of Sale System</p>
            <button id="closeAboutBtn" class="absolute top-4 right-4 w-8 h-8 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400 transition-colors">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <div class="p-6 space-y-4">
            <p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">
              Taolo POS is a modern point-of-sale system designed to streamline operations, manage inventory, and deliver excellent service for Zambian businesses.
            </p>
            <div class="grid grid-cols-2 gap-3">
              <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-xl">
                <p class="text-gray-900 dark:text-white font-medium text-sm mb-1">Real-time</p>
                <p class="text-gray-500 dark:text-gray-400 text-xs">Instant processing</p>
              </div>
              <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-xl">
                <p class="text-gray-900 dark:text-white font-medium text-sm mb-1">Inventory</p>
                <p class="text-gray-500 dark:text-gray-400 text-xs">Smart tracking</p>
              </div>
            </div>
            <div class="pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-end">
              <button id="closeAboutBtn2" class="px-4 py-2 bg-primary text-white font-medium rounded-lg hover:bg-primary/90 transition-colors text-sm">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Help Button (Fixed) -->
      <button id="helpButton" class="fixed bottom-6 left-6 z-10 w-12 h-12 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center border border-gray-200 dark:border-gray-700">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 256 256">
          <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,168a12,12,0,1,1,12-12A12,12,0,0,1,128,192Zm8-48.72V144a8,8,0,0,1-16,0v-8a8,8,0,0,1,8-8,20,20,0,1,0-20-20,8,8,0,0,1-16,0,36,36,0,1,1,44,35.28Z"></path>
        </svg>
      </button>

      <!-- Powered by Gifted Solutions Footer -->
      <footer class="fixed bottom-6 right-6 z-10">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 px-4 py-2.5 flex items-center gap-2.5">
          <div class="w-8 h-8 rounded-lg bg-primary flex items-center justify-center flex-shrink-0">
            <svg class="h-4 w-4 text-white" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 7L12 12L22 7L12 2Z"/>
              <path d="M2 17L12 22L22 17"/>
              <path d="M2 12L12 17L22 12"/>
            </svg>
          </div>
          <div>
            <p class="text-xs font-semibold text-gray-900 dark:text-white leading-tight">Gifted Solutions</p>
            <p class="text-[10px] text-gray-500 dark:text-gray-400 leading-tight">Bringing Ideas to Life</p>
          </div>
        </div>
      </footer>
    </div>

    <script type="module" src="/src/main.ts"></script>
    <script>
      // About Modal functionality
      const aboutModal = document.getElementById('aboutModal');
      const helpButton = document.getElementById('helpButton');
      const closeAboutBtn = document.getElementById('closeAboutBtn');
      const closeAboutBtn2 = document.getElementById('closeAboutBtn2');
      
      helpButton?.addEventListener('click', () => {
        aboutModal?.classList.remove('hidden');
      });
      
      closeAboutBtn?.addEventListener('click', () => {
        aboutModal?.classList.add('hidden');
      });
      
      closeAboutBtn2?.addEventListener('click', () => {
        aboutModal?.classList.add('hidden');
      });
      
      // Close on outside click
      aboutModal?.addEventListener('click', (e) => {
        if (e.target === aboutModal) {
          aboutModal.classList.add('hidden');
        }
      });
    </script>
  </body>
</html>


